<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>The Mental Warehouse</title>
  <link rel="stylesheet" href="css/styles.css">
  <meta name="theme-color" content="#fff">
</head>
<body>
  <header class="topbar">
    <div class="container">
      <h1 class="brand">The Mental Warehouse</h1>
      <nav class="nav">
        <a href="index.html" class="active">Home</a>
        <a href="movies.html">Movies</a>
        <a href="journal.html">Journal</a>
        <a href="rules.html">Rules</a>
        <a href="misc.html">Notes</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="dashboard">
      <h2>Dashboard</h2>

      <div class="cards-grid">
        <a class="card" href="movies.html" id="card-movies">
          <div class="card-title">Movies Log</div>
          <div class="card-preview"><span class="badge" id="movies-count">0</span> movies</div>
        </a>

        <a class="card" href="journal.html" id="card-journal">
          <div class="card-title">Journal</div>
          <div class="card-preview"><span class="badge" id="journal-count">0</span> entries</div>
        </a>

        <a class="card" href="rules.html" id="card-rules">
          <div class="card-title">Rules</div>
          <div class="card-preview"><span class="badge" id="rules-count">0</span> rules</div>
        </a>

        <a class="card" href="misc.html" id="card-misc">
          <div class="card-title">Notes</div>
          <div class="card-preview"><span class="badge" id="misc-count">0</span> notes</div>
        </a>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <small>© <span id="year"></span> The Mental Warehouse — a tiny creative operations hub.</small>
    </div>
  </footer>

  <script src="js/storage.js"></script>
  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    document.addEventListener('DOMContentLoaded', ()=>{
      // ensure seeded data exists so dashboard counts are accurate on first open
      let movies = storage.get('movies');
      if(!Array.isArray(movies) || movies.length===0){
        const seed = [
          { id: storage.id(), title: 'Twilight: New Moon', date: '2025-08-21', location: 'Shwetha', rating_shwetha: '6.0', rating_sarvesh: '5.0', notes: '' },
          { id: storage.id(), title: 'The Proposal', date: '2025-xx-xx', location: 'Sarvesh', rating_shwetha: '', rating_sarvesh: '', notes: '' },
          { id: storage.id(), title: 'F1: The Movie', date: '2025-09-08', location: 'Sarvesh', rating_shwetha: '9.2', rating_sarvesh: '7.4', notes: '' },
          { id: storage.id(), title: 'How to Train Your Dragon 2', date: '2025-09-09', location: 'Shwetha', rating_shwetha: '8.1', rating_sarvesh: '7', notes: '' },
          { id: storage.id(), title: "Harry Potter and the Philosopher's Stone", date: '2025-xx-xx', location: 'xxxxxxx', rating_shwetha: '9', rating_sarvesh: '6.3', notes: '' }
        ];
        storage.set('movies', seed);
        movies = seed;
      }

      let rules = storage.get('rules');
      if(!Array.isArray(rules) || rules.length===0){
        const defaults = [
          { id: storage.id(), text: 'no take backs' },
          { id: storage.id(), text: 'the older person is always right' },
          { id: storage.id(), text: "no modifying my (shwetha's) rules" },
          { id: storage.id(), text: 'only 1 use of each excuse is allowed per conversation' }
        ];
        storage.set('rules', defaults);
        rules = defaults;
      }

      const journal = storage.get('journal') || [];
      const misc = storage.get('misc') || [];

      document.getElementById('movies-count').textContent = (movies || []).length;
      document.getElementById('journal-count').textContent = journal.length;
      document.getElementById('rules-count').textContent = (rules || []).length;
      document.getElementById('misc-count').textContent = misc.length;
    });
  </script>
</body>
</html>
